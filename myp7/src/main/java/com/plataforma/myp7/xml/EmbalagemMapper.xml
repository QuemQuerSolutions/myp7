<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="EmbalagemMapper">

	<resultMap id="embalagemMap" type="Embalagem">
		<id property="idEmbalagem" 				column="ID_EMBALAGEM"/>
		<result property="siglaEmbalagem"  		column="SIGLA_EMBALAGEM" />
		<result property="qtdEmbalagem" 		column="QTD_EMBALAGEM" />
		<result property="nomeEmbalagemCompra" 	column="NOME_EMBALAGEM_COMPRA" />
		<result property="nomeEmbalagem" 		column="NOME_EMBALAGEM"/>
	</resultMap>

	<sql id="selectEmbalagem">
		<![CDATA[
			SELECT ID_EMBALAGEM, SIGLA_EMBALAGEM, QTD_EMBALAGEM, NOME_EMBALAGEM_COMPRA, NOME_EMBALAGEM
			FROM MYP7_Embalagem
		  ]]>
	</sql>
	
	<select id="obterTodasEmbalagens" resultMap="embalagemMap">
		<include refid="selectEmbalagem"/>
	</select>

	<select id="obterEmbalagens" resultMap="embalagemMap">
		<include refid="selectEmbalagem"/>
		WHERE 1=1
		<if test="siglaEmbalagem != null">
			AND SIGLA_EMBALAGEM = #{siglaEmbalagem} 
		</if>
		<if test="nomeEmbalagem != null">
			AND NOME_EMBALAGEM = #{nomeEmbalagem}
		</if>
	</select>
	
	<select id="countEmbalagem" parameterType="int" resultType="int">
		SELECT COUNT(*) FROM MYP7_Embalagem
		WHERE 1=1
		<if test="siglaEmbalagem != null">
			AND SIGLA_EMBALAGEM = #{siglaEmbalagem} 
		</if>
		<if test="nomeEmbalagem != null">
			AND NOME_EMBALAGEM = #{nomeEmbalagem}
		</if>
	</select>	
	
	<insert  id="salvarEmbalagem" keyProperty="ID_EMBALAGEM" keyColumn="ID_EMBALAGEM" useGeneratedKeys="true">
		INSERT INTO MYP7_Embalagem 
			(SIGLA_EMBALAGEM, QTD_EMBALAGEM, NOME_EMBALAGEM_COMPRA, NOME_EMBALAGEM)
		VALUES
			(#{siglaEmbalagem}, #{qtdEmbalagem}, #{nomeEmbalagem}, #{nomeEmbalagem}) 
	</insert>
</mapper>
